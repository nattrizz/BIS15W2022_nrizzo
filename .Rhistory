mutate(conservation_modified = na_if(conservation, "domesticated"))%>%
count(conservation_modified, sort = T) #previously there were only 29 NA's
life_history <- readr::read_csv("data/mammal_lifehistories_v2.csv")
life_history %>%
skimr::skim()
library("tidyverse")
library("janitor")
library("skimr")
life_history <- read_csv("data/mammal_lifehistories_v3.csv") %>% clean_names()
glimpse(life_history)
life_history %>%
purrr::map_df(~ sum(is.na(.)))
hist(life_history$wean_mass)
life_history_tidy <- life_history %>%
na_if("-999") %>%
mutate(newborn=na_if(newborn, ("not measured")))
naniar::miss_var_summary(life_history_tidy)
hist(life_history_tidy$max_life)
life_history_tidy <-
life_history_tidy %>%
mutate(max_life=na_if(max_life, 0))
naniar::miss_var_summary(life_history_tidy)
life_history_tidy %>%
group_by(order) %>%
select(order, wean_mass) %>%
naniar::miss_var_summary(order=T)
life_history %>%
naniar::replace_with_na(replace = list(newborn = "not measured", weaning= -999, wean_mass= -999, afr= -999, max_life= 0, litter_size= -999, gestation= -999, mass= -999)) %>%
naniar::miss_var_summary()
cites <- read_csv(file="data/cites.csv") %>% janitor::clean_names()
cites$year <- as.factor(cites$year)
naniar::miss_var_summary(cites)
cites %>%
group_by(class) %>%
select(class, exporter_reported_quantity) %>%
naniar::miss_var_summary() %>%
arrange(desc(pct_miss))
library(visdat)
vis_dat(life_history_tidy) #classes of data
vis_miss(life_history_tidy)
life_history_advance <-
readr::read_csv(file = "data/mammal_lifehistories_v3.csv",
na = c("NA", " ", ".", "-999")) #all NA, blank spaces, .,and -999 are treated as NA
naniar::miss_var_summary(life_history_advance)
naniar::miss_var_summary(life_history)
library("tidyverse")
library("janitor")
library("skimr")
life_history_tidy <- read_csv("data/mammal_lifehistories_v3.csv") %>% clean_names()
naniar::miss_var_summary(life_history_tidy)
hist(life_history_tidy$max_life)
life_history_tidy <-
life_history_tidy %>%
mutate(max_life=na_if(max_life, 0))
naniar::miss_var_summary(life_history_tidy)
life_history_tidy %>%
group_by(order) %>%
select(order, wean_mass) %>%
naniar::miss_var_summary(order=T)
life_history %>%
naniar::replace_with_na(replace = list(newborn = "not measured", weaning= -999, wean_mass= -999, afr= -999, max_life= 0, litter_size= -999, gestation= -999, mass= -999)) %>%
naniar::miss_var_summary()
library(visdat)
vis_dat(life_history_tidy) #classes of data
vis_miss(life_history_tidy)
life_history_advance <-
readr::read_csv(file = "data/mammal_lifehistories_v3.csv",
na = c("NA", " ", ".", "-999")) #all NA, blank spaces, .,and -999 are treated as NA
naniar::miss_var_summary(life_history_advance)
life_history %>%
naniar::replace_with_na(replace = list(newborn = "not measured", weaning= -999, wean_mass= -999, afr= -999, max_life= 0, litter_size= -999, gestation= -999, mass= -999)) %>%
naniar::miss_var_summary()
life_history <- read_csv("data/mammal_lifehistories_v3.csv") %>% clean_names()
install.packages(c("cli", "dtplyr", "glue", "testthat"))
library("tidyverse")
superhero_info <- readr::read_csv("data/heroes_information.csv", na = c("", "-99", "-"))
superhero_powers <- readr::read_csv("data/super_hero_powers.csv", na = c("", "-99", "-"))
names(superhero_info)
library(janitor)
superhero_info <- janitor::clean_names(superhero_info)
head(superhero_info)
head(superhero_powers)
library("janitor")
superhero_powers <- janitor::clean_names(superhero_powers)
tabyl(superhero_info, alignment)
superhero_info %>%
filter(alignment=="neutral")
superhero_info %>%
select(name,alignment, race)
superhero_info %>%
filter(race!="human")
good_guys <- data.frame(superhero_info %>%
filter(alignment=="good"))
good_guys
bad_guys <- data.frame (superhero_info %>%
filter(alignment=="bad"))
bad_guys
tabyl(good_guys, race)
good_guys %>%
select(name, race) %>%
filter(race=="Asgardian")
bad_guys %>%
select(name, height) %>%
filter(height>200) %>%
arrange(height)
good_guys %>%
select(name, hair_color) %>%
filter(hair_color=="No Hair")
bad_guys %>%
select(name, hair_color) %>%
filter(hair_color=="No Hair")
superhero_info %>%
select(name, height, weight) %>%
filter(height>200, weight>=450) %>%
arrange(height, weight)
superhero_info %>%
select(name, height, weight) %>%
filter(height>300|weight>450) %>%
arrange(height, weight)
superhero_info %>%
select(name, height, weight) %>%
filter(height>300|weight>450) %>%
arrange(height, desc(weight))
glimpse(superhero_powers)
superhero_powers %>%
select(hero_names, accelerated_healing, durability, super_strength) %>%
filter(accelerated_healing=="TRUE", durability=="TRUE", super_strength=="TRUE")
#install.packages("naniar")
#install.packages("visdat")
#install.packages("naniar")
#install.packages("visdat")
library("tidyverse")
library("naniar")
install.packages("naniar")
install.packages("visdat")
library("tidyverse")
library("naniar")
library("skimr")
library("janitor")
?msleep
summary(msleep)
is.na(msleep)
any_na(msleep)
msleep %>%
summarize(number_nas = sum(is.na(msleep)))
msleep %>%
summarize(number_nas = sum(is.na(conservation)))
msleep %>%
summarise_all(~(sum(is.na(.))))
msleep %>%
purrr::map_df(~ sum(is.na(.))) #map to a new data frame the sum results of the is.na function for all columns
msleep %>%
purrr::map_df(~ sum(is.na(.))) %>%
pivot_longer(everything(),
names_to= "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas))
msleep %>%
count(conservation)
msleep %>%
count(conservation, sort = TRUE)
amniota <- readr::read_csv("data/amniota.csv")
amniota %>%
summarise_all(~(sum(is.na(.))))
is.na(amniota)
any.na(amniota)
any_na(amniota)
amniota %>%
summarise_all(~(sum(is.na(.))))
hist(adult_body_mass_g)
hist(class)
hist(female_maturi)
hist(female_maturity_d)
amniota %>%
hist(litter_or_clutch_size_n)
amniota %>%
hist(adult_body_mass_g)
amniota %>%
is.numeric(adult)
amniota %>%
is.numeric(adult_body_mass_g)
amniota %>%
hist(incubation_d)
amniota_tidy <- amniota %>%
na_if("-999")
amniota_tidy %>%
summarise_all(~(sum(is.na(.))))
amniota_tidy %>%
purrr::map_df(~ sum(is.na(.))) %>%
pivot_longer(everything(),
names_to= "variables",
values_to = "num_nas") %>%
arrange(desc(num_nas))
names(msleep)
msleep %>%
count(conservation, sort=T)
msleep %>%
mutate(conservation_modified = na_if(conservation, "domesticated"))%>%
count(conservation_modified, sort = T) #previously there were only 29 NA's
mammals <- readr::read_csv("data/life_history.csv")
mammals <- readr::read_csv("lab3/data/life_history.csv")
mammals <- readr::read_csv(file = "lab3/data/life_history.csv")
getwd()
setwd("~/Desktop/BIS15W2022_nrizzo")
getwd()
getwd()
mammals <- readr::read_csv(file = "lab3/data/life_history.csv")
mammals <- readr::read_csv(file = "data/life_history.csv")
mammals <- readr::read_csv("data/life_history.csv")
mammals <- readr::read_csv("data/mammal_lifehistories_v2.csv")
skimr::mammals
skim(mammals)
glimpse(mammals)
skim(mammals)
names(mammals)
any_na(mammals)
mammals_tidy<- mammals %>% na_if("-999")
mammals_tidy <- summarise_all(~(sum(is.na(.))))
mammals_tidy %>%  summarise_all(~(sum(is.na(.))))
pivot_longer(everything(), names_to= "variables", values_to= "num_nas" %>% arrange(desc(num_nas))
mammals_tidy %>%
mammals_tidy %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(), names_to= "variables", values_to= "num_nas" %>% arrange(desc(num_nas))
mammals_tidy %>%
purrr::map_df(~sum(is.na(.))) %>%
pivot_longer(everything(), names_to= "variables", values_to= "num_nas") %>% arrange(desc(num_nas))
mammals_tidy %>%  summarise_all(~(sum(is.na(.))))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library("naniar")
library("skimr")
library("janitor")
elephants <- readr::read_csv("data/ElephantsMF.csv")
skim(elephants)
elephants <- janitor::clean_names(elephants)
names(elephants)
compare_df_cols(elephants)
elephants %>%
mutate(sex=as.factor(sex))
elephants %>%
count(n_distinct("sex"))
elephants %>%
count(sex)
elephants %>%
summarise(avg_age_all= mean(age))
elephants %>%
group_by(sex)
elephants %>%
group_by(sex) %>%
summarise(mean(age))
elephants %>%
group_by(sex) %>%
filter(age>="20")
elephants %>%
filter(age>="20")
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height_sex = mean(height))
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height))
elephants %>%
group_by(sex) %>%
summarise(avg_height = mean(height))
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height))
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height)total=n()))
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height),total=n()))
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height))total=n()))
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height))total=n())
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height)total=n())
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height), total=n())
elephants %>%
filter(age>="20") %>%
group_by(sex) %>%
summarise(avg_height = mean(height), height_min= min(height), height_max=max(height), total=n())
gabon <- readr::read_csv("data/IvindoData_DryadVersion.csv")
names(gabon)
gabon<- janitor::clean_names(gabon)
names(gabon)
skim(gabon)
gabon %>%
mutate(hunt_cat=as.factor(hunt_cat, land_use=as.factor(land_use)))
mutate(hunt_cat=as.factor(hunt_cat, land_use=as.factor(land_use))
gabon %>%
gabon %>%
mutate(hunt_cat=as.factor(hunt_cat, land_use=as.factor(land_use))
gabon %>%
mutate(hunt_cat=as.factor(hunt_cat, land_use=as.factor(land_use))
gabon %>%
mutate(hunt_cat=as.factor(hunt_cat), land_use=as.factor(land_use))
gabon %>%
filter(hunt_cat=="moderate, high")
gabon %>%
filter(hunt_cat=="moderate" "high")
gabon %>%
filter(hunt_cat==!"none")
gabon %>%
filter(hunt_cat=~!"none")
gabon %>%
filter(hunt_cat=!"none")
gabon %>%
filter(hunt_cat=="moderate"|hunt_cat=="high")
gabon %>%
filter(hunt_cat=="moderate"| hunt_cat=="high")
gabon %>%
filter(hunt_cat=="moderate"| hunt_cat=="high")
gabon %>%
filter(hunt_cat=="Moderate"| hunt_cat=="High")
gabon %>%
filter(hunt_cat=="Moderate"| hunt_cat=="High") %>%
summarise(avg_divs_birds=mean(diversity_bird_species, avg_divs_mam=mean(diversity_mammal_species)))
gabon %>%
group_by(hunt_cat) %>%
filter(hunt_cat=="Moderate"| hunt_cat=="High") %>%
summarise(avg_divs_birds=mean(diversity_bird_species, avg_divs_mam=mean(diversity_mammal_species)))
gabon %>%
filter(between(distance, "3", "25"))
gabon %>%
filter(between(distance, "3", "25")) %>%
summarise(across(contains("ra", mean, na.rm=T)))
gabon %>%
filter(between(distance, "3", "25")) %>%
summarise(across(contains("ra", mean)))
gabon %>%
filter(between(distance, "3", "25"))
summarise(across(contains("ra"))
gabon %>%
gabon %>%
filter(between(distance, "3", "25")) %>%
summarise(across(contains("ra"),mean))
gabon %>%
filter(between(distance, "3", "25")) %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<"3" | distance<"25") %>%
summarise(across(contains("ra_"),mean))
group_by(distance) %>%
summarise(across(contains("ra_"),mean))
group_by(distance) %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(short_distance = distance<"3")
gabon %>%
group_by(distance) %>%
filter(short_distance == distance<"3")
gabon %>%
filter(distance=<"3" | distance=>"25") %>%
gabon %>%
filter(distance<="3" | distance<="25") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
filter(distance<="3" | distance<="25") %>%
group_by(distance) %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<="3" | distance<="25") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<="3" & distance<="25") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance==<"3" & distance==>"25") %>%
gabon %>%
group_by(distance) %>%
filter(distance=<"3" & distance=>"25")
gabon %>%
group_by(distance) %>%
filter(distance<"3" & distance>"25")
#summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<"3" & distance>"25") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<"3" | distance>"25") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<"3", distance>"25") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<"3") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
filter(distance<"3") %>%
summarise(across(contains("ra_"),mean))
gabon %>%
select(distance)
gabon %>%
filter(distance<"3") %>%
summarise(across(contains("ra_"),mean))
gabon_less <-gabon %>%
filter(distance<"3") %>%
summarise(across(contains("ra_"),mean))
gabon_less
gabon_less <-gabon %>%
filter(distance<"3") %>%
summarise(distance, across(contains("ra_"),mean))
gabon_less <-gabon %>%
filter(distance<"3") %>%
summarise(distance, across(contains("ra_"),mean))
gabon_less
gabon_less <-gabon %>%
filter(distance=<"3") %>%
gabon_less <-gabon %>%
filter(distance<="3") %>%
summarise(distance, across(contains("ra_"),mean))
gabon_less <-gabon %>%
filter(distance<="3") %>%
summarise(distance, across(contains("ra_"),mean))
gabon_less
gabon %>%
filter(distance, "3", "25"))
gabon %>%
filter(distance== "3", "25"))
gabon %>%
filter(distance== "3", "25")
gabon %>%
filter(distance=<"3")
gabon %>%
filter(distance<3)
gabon %>%
filter(distance<3 & distance<25) %>%
summarise(distance, across(contains("ra_"),mean))
gabon %>%
filter(distance<3) %>%
summarise(distance, across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<3 & distance<25) %>%
summarise(distance, across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<3) %>%
filter(distance<25)
gabon %>%
group_by(distance) %>%
filter(distance<3) %>%
summarise(distance, across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<3&>25) %>%
gabon %>%
group_by(distance) %>%
filter(distance<3|>25) %>%
gabon %>%
group_by(distance) %>%
filter(distance<3|distance>25) %>%
summarise(distance, across(contains("ra_"),mean))
gabon %>%
group_by(distance) %>%
filter(distance<3|distance>25) %>%
summarise(distance, across(contains("ra_"),mean, na.rm=T))
gabon %>%
group_by(land_use) %>%
filter(land_use=="Park") %>%
summarise(across(contains("rich", mean)))
gabon %>%
group_by(land_use) %>%
filter(land_use=="Park") %>%
summarise(across(contains("rich"), mean))
gabon %>%
group_by(land_use) %>%
filter(land_use=="Park") %>%
summarise(across(contains("rich"), mean, total=n()))
gabon %>%
group_by(land_use) %>%
filter(land_use=="Park") %>%
summarise(across(contains("rich"), mean, total=n()))
summarise(across(contains("rich"), mean)
gabon %>%
gabon %>%
group_by(land_use) %>%
filter(land_use=="Park") %>%
summarise(across(contains("rich"), mean))
